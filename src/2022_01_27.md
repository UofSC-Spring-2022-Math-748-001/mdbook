# Base change 

Recall in commutative algebras given a diagram  
$$
\begin{CD}
B     @>>>  R\\
@VVV        \\
S     
\end{CD}
$$
we can form a pushout (or fiber coproduct) 
$$
\begin{CD}
B @>>> R \\
@VVV @VVV \\
S @>>> S \otimes_B R 
\end{CD}
$$
using the tensor product $S \otimes_B R$.

Consequently, in the category of affine schemes, we have 
fiber products (or pullbacks) 
$$
\begin{CD}
X \times_Z Y @>>> Y \\
@VVV @VVV \\
X @>>> Z 
\end{CD}
$$
where, if $X = \operatorname{Spec} R$, $Y = \operatorname{Spec} S$, 
and $Z = \operatorname{Spec} B$, we have 
$$
X \times_Z Y = \operatorname{Spec} (S \otimes_B R). 
$$

For schemes generally, we can use this to build fiber products. Given 
$$
\begin{CD} 
@. Y \\
@. @VVgV \\
X @>>f> Z 
\end{CD}
$$ 
$X \times_Z Y$ exists. Given affine $U \subset X, V \subset Y$, and $W 
\subset Z$ with $f(U), g(V) \subset W$, we have an affine chart 
$$
U \times_W V 
$$
and these can be glued together appropriately to give the fiber product 
as a scheme.

A square 
$$
\begin{CD}
W @>>> Y \\
@VVV @VVV \\
X @>>> Z 
\end{CD}
$$
isomorphic to a fiber product square is commonly called _Cartesian_. 

Given a Cartesian square 
$$
\begin{CD}
W @>>\tilde{f}> Y \\
@VV\tilde{g}V @VVgV \\
X @>>f> Z
\end{CD}
$$
and a $E \in D(\operatorname{Qcoh} X)$ can we compare 
$$
\mathbf{L}g^\ast \mathbf{R}f_\ast E ~\text{and } \mathbf{R}\tilde{f}_\ast 
\mathbf{L}\tilde{g}^\ast E
$$
In general, they will not be quasi-isomorphic. However, under some assumptions, 
this is the case. 

**Theorem**. Assume that 
$$
\mathcal Tor^{\mathcal O_Z}_i (\mathcal O_X, \mathcal O_Y) = 0 
$$
for $i \neq 0$. Then, there is a natural isomorphism
$$
\mathbf{L}g^\ast \mathbf{R}f_\ast E \cong \mathbf{R}\tilde{f}_\ast 
\mathbf{L}\tilde{g}^\ast E
$$

In particular, if either $\mathcal O_X$ or $\mathcal O_Y$ is flat over $\mathcal O_Z$, 
then we can exchange pushing and pulling.

The previous result is often called _(flat) base change_. We won't provide more 
details on this result. [Lipman](https://www.math.purdue.edu/~jlipman/Duality.pdf) has 
some very thorough notes on Grothendieck duality which include exposition on Tor-independent 
base change. 

Along with the projection formula, base change will serve as regular tool in our future 
investigations of derived categories. 

# Kernels and integral transforms

We saw [last semester](https://738.f21.matthewrobertballard.com/notes/2021_10_14/) that for 
two rings $S$ and $R$ the category of $(S,R)$-bimodules was an imporant source of 
functors between $D(\operatorname{Mod} S)$ and $D(\operatorname{Mod} R)$. 

Here we globalize this idea. Note that an $(S,R)$-bimodule is the same data as a 
$S \otimes_{\mathbb{Z}} R$-module. Geometrically, $S \otimes R$ corresponds to 
the fiber product. Therefore, it is natural to look to objects on the (fiber) product 
for a source of functors.

For 
$$
X \overset{\pi_X}{\leftarrow} X \times_Z Y \overset{\pi_Y}{\to} Y
$$
and $Q \in D(\operatorname{Qcoh} X \times_Z Y)$, we get a functor 
$$
\begin{aligned}
\Phi_Q : D(\operatorname{Qcoh} X) & \to D(\operatorname{Qcoh} Y) \\
E & \mapsto \mathbf{R}\pi_{Y\ast} \left( \mathbf{L}\pi_X^\ast E \overset{\mathbf{L}}{\otimes} Q \right) 
\end{aligned}
$$

We call $\Phi_Q$ an _integral transform_ and $Q$ its _kernel_. If $\Phi_Q$ is an equivalence, we 
say $\Phi_Q$ and $Q$ are _Fourier-Mukai_ and $X$ and $Y$ are _Fourier-Mukai_ partners. 

The language is inspired by the analogy with integral transformations in analysis. 
$$
f(x) \mapsto \int_X Q(x,y) f(x) \ dx. 
$$

Each integral transform comes with a right adjoint thanks to Grothendieck duality. 

**Lemma**. We have 
$$
\Phi_Q \dashv \Psi_Q := \mathbf{R}\pi_{X\ast} \mathbf{R}\mathcal Hom_{X \times Y}(Q, 
\pi_Y^! (-)) 
$$
