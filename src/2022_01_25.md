# The projection formula and standard adjunctions

The main functors in play for sheaves of modules are 
- $f_\ast$ for a map $f: X \to Y$
- $f^\ast$ for $f : X \to Y$ 
- $\otimes_{\mathcal O_X}$ and 
- $\mathcal Hom_{\mathcal O_X}$ 

We will also use the notation 
$$
E^\vee := \mathcal Hom_{\mathcal O_X}(E,\mathcal O_X)
$$
for both the underived and derived duals over $\mathcal O_X$.

We record some back facts about them and we omit the details for 
the most part. 

**Lemma**. We have an adjunction $f^\ast \dashv f_\ast$. 

**Lemma**. We also have an adjunction 
$$
\otimes_{\mathcal O_X} E \dashv \mathcal Hom_{\mathcal O_X}(E,-)
$$

**Lemma**. Tensor products commute with pullbacks 
$$
f^\ast (E \otimes_{\mathcal O_X} F) \cong f^\ast E \otimes_{\mathcal O_X} f^\ast F
$$

From these, we can derive some less immediate ones. 

**Lemma**. We have an adjunction 
$$
f^\ast(- \otimes_{\mathcal O_Y} F) \dashv \mathcal Hom_{\mathcal O_Y}(F, f_\ast (-))
$$

{{#proof}}
We have natural isomorphisms 
$$
\begin{aligned}
\operatorname{Hom}_X(f^\ast(E \otimes F), G) & \cong 
\operatorname{Hom}_Y(E \otimes F, f_\ast G) \\
& \cong \operatorname{Hom}_Y(E, \mathcal Hom(F, f_\ast G))
\end{aligned}
$$
{{/proof}}

We also have a sheafy version of pull-push adjunction. 

**Lemma**. There is a natural isomorphism 
$$
\mathcal Hom_{\mathcal O_Y}(E,f_\ast F) \cong f_\ast \mathcal Hom_{\mathcal O_X}(f^\ast E,F)
$$

{{#proof}}
We have 
$$
\begin{aligned}
\operatorname{Hom}_X(f^\ast E \otimes f^\ast F, G) & \cong 
\operatorname{Hom}_X(f^\ast E, \mathcal Hom(f^\ast F, G) \\ 
& \cong \operatorname{Hom}_Y (E, f_\ast \mathcal Hom_{\mathcal O_X}(f^\ast F,G)))
\end{aligned}
$$
From the previous lemma, we have two right adjoints. Thus, they must be isomorphic.
{{/proof}}

One of the most useful relationships between these functors is one that is not true. 
Thanks to the map 
$$
f^\ast (f_\ast E \otimes F) \cong f^\ast f_\ast E \otimes f^\ast F \to E \otimes f^\ast F
$$
coming from the counit and adjunction we have a natural map 
$$
f_\ast E \otimes F \to f_\ast (E \otimes f^\ast F) 
$$
However, this is _not_ an isomorphism of quasi-coherent sheaves in general. 

For what $E$ and $F$ is the map 
$$
f_\ast E \otimes F \to f_\ast (E \otimes f^\ast F)
$$
an isomorphism? Taking $F = \mathcal O_Y$ works. Since isomorphism can be detected locally, 
it suffices that $F$ is locally isomorphic to $\mathcal O_Y$. 

Moreover, if 
$$
f_\ast E \otimes F_a \to f_\ast (E \otimes f^\ast F_a) 
$$
for some $a \in A$, then 
$$
f_\ast E \otimes \bigoplus_{a \in A} F_a \to f_\ast \left( E \otimes f^\ast \left( 
\bigoplus F_a \right) \right) 
$$
will also be an isomorphism 
if $f_\ast$ commutes with coproducts which is true for quasi-projective schemes 
(and more generally). 

**Proposition**. Let $f:X \to Y$ be a map of quasi-projective schemes. Then for 
any $E \in D(\operatorname{Qcoh} X)$ and $F \in D(\operatorname{Qcoh} Y)$, the natural map 
$$
\mathbf{R}f_\ast E \overset{\mathbf{L}}{\otimes} F \to \mathbf{R}f_\ast 
\left( E \overset{\mathbf{L}}{\otimes} \mathbf{L}f^\ast F \right) 
$$
is a quasi-isomorphism.

{{#proof}}
We can replace $E$ with a $K$-injective complex and $F$ with complexe of 
locally-free sheaves. Then, from the discussion, above we know that the induced 
map on the components is an isomorphism. 
{{/proof}}

The previous result is often called the _projection formula_. 


